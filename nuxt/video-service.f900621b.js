import{_ as G}from"./mx-btn.d7ca5fda.js";import{_ as J}from"./mx-loading.4ecc75fb.js";import{_ as K}from"./mx-icon.32edc059.js";import{_ as O}from"./mx-input-num.c4966364.js";import{_ as Q}from"./mx-dialog.047d8f01.js";import{_ as R}from"./layout.0bc348b9.js";import{a as X,z as Z,A as u,B as E,o as d,c as p,w as t,b as i,t as o,h as r,i as n,e as b,F as V,r as x,s as z,v as ee,u as y,f as _,C as ae}from"./entry.ce67fe4b.js";import{g as oe}from"./index.980b4d70.js";import{a as B}from"./api-asset.f95e858a.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./request.5554df2c.js";const te={class:"asset-video"},se={class:"asset-video-subtitle"},ie={class:"asset-video-desc"},le={key:1,class:"asset-video-list"},ne={class:"asset-video-item-title"},de={class:"asset-video-item-desc"},re={class:"asset-video-item-price"},ue={class:"pay-dialog-logo"},ve={class:"pay-dialog-title"},ce={class:"pay-dialog-num"},pe={class:"pay-dialog-price"},me={class:"pay-dialog-price-diamond"},fe={class:"mx-ml-15"},ye={class:"pay-dialog-price-diamond pay-dialog-price-big"},_e={class:"mx-mb-20"},ge=["placeholder"],Ne={__name:"video-service",setup($e){const{locale:k}=X(),T=Z().provides.$toast,h=u([]);(async()=>{const e=await B.getPrice();if(e.code){T.error(e.msg);return}const a=e.videoDown;h.value=[{key:2,payType:"subMonth",payPrice:w(a.subMonth),diamondType:"oneMonth",diamondPrice:w(a.oneMonth)},{key:3,payType:"subYear",payPrice:w(a.subYear)}]})();function w(e){const[a]=e.split("|");return a}const v=u(!1);async function M(e){v.value=!0;const a={lang:k.value,product:"videoDown",type:e.payType},l=await B.createPayment(a);v.value=!1,l.code?T.error(l.msg):(g.value=!1,window.open(l.url))}const m=u({}),C=u(!1),c=u(1),g=u(!1),f=u(!1),D=u(void 0);function L(e){m.value=e,e.diamondType==="lifetime"?(f.value=!0,c.value=void 0):(C.value=!0,c.value=1)}function U(){C.value=!1,c.value>3?g.value=!0:f.value=!0}const N=E(()=>m.value.diamondType==="lifetime"?m.value.diamondPrice:m.value.diamondPrice*c.value);function A(){g.value=!1,f.value=!0}const F=E(()=>v.value||!D.value),I=u(!1),P=u(!1);async function H(){v.value=!0;const e={product:"videoDown",type:m.value.diamondType,password:await oe(D.value)};m.value.diamondType==="oneMonth"&&(e.num=c.value);const a=await B.payProduct(e);v.value=!1,a.code?a.code===101?(f.value=!1,P.value=!0):T.error(a.msg):(f.value=!1,I.value=!0)}return(e,a)=>{const l=G,Y=J,S=K,W=O,$=Q,j=R;return d(),p(j,{name:"asset",title:"videoTitle","card-header":!1},{default:t(()=>[i("div",te,[i("div",se,o(e.$t("videoSubtitle")),1),i("div",ie,[i("span",null,o(e.$t("videoDesc")),1),r(l,{type:"link",href:e.$t("videoHelpLink"),target:"_blank"},{default:t(()=>[n(o(e.$t("videoHelp")),1)]),_:1},8,["href"])]),h.value.length?(d(),b("div",le,[(d(!0),b(V,null,x(h.value,s=>z((d(),b("div",{key:s.key,class:"asset-video-item"},[i("div",ne,o(e.$t(`videoServiceTitle${s.key}`)),1),i("div",de,o(e.$t(`videoServiceDesc${s.key}`)),1),i("div",re,"$ "+o(s.payPrice/100),1),r(l,{type:"primary",size:"large",disabled:v.value,onClick:q=>M(s)},{default:t(()=>[y(k)==="zh"&&s.payType==="lifetimeUSD"?(d(),b(V,{key:0},[n("微信支付")],64)):(d(),b(V,{key:1},[n(o(e.$t("videoServicePay2")),1)],64))]),_:2},1032,["disabled","onClick"]),s.diamondPrice?(d(),p(l,{key:0,size:"large",disabled:v.value,onClick:q=>L(s)},{default:t(()=>[n(o(e.$t("videoServicePay1")),1)]),_:2},1032,["disabled","onClick"])):_("",!0)])),[[ee,y(k)==="en"||s.payType!=="lifetimeUSD"]])),128))])):(d(),p(Y,{key:0}))]),C.value?(d(),p($,{key:0,title:"videoTitle",class:"pay-dialog",close:!0,onClose:a[1]||(a[1]=s=>C.value=!1)},{default:t(()=>[i("div",ue,[r(S,{icon:"video"})]),i("div",ve,o(e.$t("videoServiceMonth",{num:c.value})),1),i("div",ce,[i("span",null,o(e.$t("vipDialogCount")),1),r(W,{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=s=>c.value=s)},null,8,["modelValue"])]),i("div",pe,[i("span",null,o(e.$t("vipDialogSingle")),1),r(S,{icon:"diamond-base"}),i("span",me,o(m.value.diamondPrice),1),i("span",fe,o(e.$t("vipDialogTotal")),1),r(S,{icon:"diamond-base",class:"pay-dialog-price-big"}),i("span",ye,o(y(N)),1)]),r(l,{class:"pay-dialog-btn",type:"primary",onClick:U},{default:t(()=>[n(o(e.$t("btnContirm")),1)]),_:1})]),_:1})):_("",!0),g.value?(d(),p($,{key:1,title:"alertTitle",close:!0,onClose:a[3]||(a[3]=s=>g.value=!1)},{footer:t(()=>[r(l,{onClick:A},{default:t(()=>[n(o(e.$t("videoServiceBtn1")),1)]),_:1}),r(l,{type:"primary",disabled:v.value,onClick:a[2]||(a[2]=s=>M(h.value[2]))},{default:t(()=>[n(o(e.$t("videoServiceBtn2")),1)]),_:1},8,["disabled"])]),default:t(()=>[n(o(e.$t("videoServiceWarning"))+" ",1)]),_:1})):_("",!0),f.value?(d(),p($,{key:2,title:"profilePassConfirm"},{footer:t(()=>[r(l,{onClick:a[5]||(a[5]=s=>f.value=!1)},{default:t(()=>[n(o(e.$t("btnCancel")),1)]),_:1}),r(l,{type:"primary",disabled:y(F),onClick:H},{default:t(()=>[n(o(e.$t("destroyConfirm")),1)]),_:1},8,["disabled"])]),default:t(()=>[i("div",_e,o(e.$t("videoConfirmText",{num:y(N)})),1),z(i("input",{"onUpdate:modelValue":a[4]||(a[4]=s=>D.value=s),placeholder:e.$t("profilePassInput"),type:"password",class:"asset-video-input"},null,8,ge),[[ae,D.value]])]),_:1})):_("",!0),I.value?(d(),p($,{key:3,title:"alertTitle"},{default:t(()=>[n(o(e.$t("videoSuccessText")),1)]),_:1})):_("",!0),P.value?(d(),p($,{key:4,title:"videoErrorTitle"},{footer:t(()=>[r(l,{onClick:a[6]||(a[6]=s=>P.value=!1)},{default:t(()=>[n(o(e.$t("videoErrorBtn2")),1)]),_:1}),r(l,{type:"primary",href:`https://www.maxthon.com/${y(k)}/asset/charge/`,target:"_blank"},{default:t(()=>[n(o(e.$t("videoErrorBtn1")),1)]),_:1},8,["href"])]),default:t(()=>[n(o(e.$t("videoErrorDesc"))+" ",1)]),_:1})):_("",!0)]),_:1})}}};export{Ne as default};
